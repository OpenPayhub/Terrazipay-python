# X402: A Programmable Payment Flow from Client -> Server -> On-Chain

> This document describes a complete payment flow implementation and architecture vision based on the **X402 concept**.  
> For code-level implementation details from initiation to payment verification, see: [x402_mock](../src/terrazip/x402_mock/README.md)

---

## 1. Background and Motivation

In Agent/Tool/LLM-driven applications, **"Request as Value"** is becoming a new norm:

- Agents must complete payment/authorization before accessing resources
- Servers want to charge fees **without custodying private keys**
- Payment actions need to be composable, verifiable, and on-chain settleable

Traditional solutions often face these issues:

- ❌ Payment decoupled from requests, fragmented processes  
- ❌ Server must trust Client or rely on centralized payment gateways  
- ❌ Cannot naturally embed payments in Agent's automated decision chain  

**X402**'s core idea is to integrate payment capability into a "protocolized request flow".

---

## 2. What is X402 (Conceptual Explanation)

X402 is not a specific implementation, but a **convention-based flow**:

- Use `402 Payment Required` to express resource access preconditions  
- Client actively initiates payment intent  
- Server continues service after verifying payment capability/authorization  

In Web2 semantics, 402 is an almost unused status code;  
In Web3/Agent world, it perfectly serves as a **"programmable payment threshold"**.

---

## 3. Project Workflow Overview

This project implements a complete three-stage flow:  
![Workflow](/assets/work_flow.png)

## Further Reading

- Coinbase's exploration and implementation of X402:  
  https://github.com/coinbase/x402